<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <link
    href="/source/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
    crossorigin="anonymous"
    >
    <link
      rel="stylesheet"
      href="https://outer.tealeaf.su/assets/3rdparty/all.min.css"
    />
    <script
    src="/source/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"
    ></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  <body
    style="
    background: rgb(86, 83, 144);
    background: linear-gradient(
     90deg,
      rgba(86, 83, 144, 1) 0%,
      rgba(99, 96, 207, 1) 23%,
      rgba(52, 63, 106, 1) 100%
    );
    box-sizing: border-box;
    "
  >
    {% if is_logged %} {% if not is_mob and not is_tab %}
    <nav
      class="navbar navbar-expand-lg"
      style="
        background: rgb(86, 83, 144);
        background: linear-gradient(
          90deg,
          rgba(86, 83, 144, 1) 0%,
          rgba(99, 96, 207, 1) 23%,
          rgba(52, 63, 106, 1) 100%
        );
      "
    >
      <div class="container">
        <div class="navbar-collapse" id="navbarNav" style="width:100%">
          <ul class="navbar-nav" style="width: 100%">
            <div
              class="d-flex flex-row"
              style="width: 100%"
            >
              <div class="d-flex flex-row" style="width:100%">
                <div class="d-flex flex-row" style="width:100%">
                  <a
                  class="navbar-brand"
                  href="/"
                  class="{{ title == 'Главная' ? 'active' : '' }}"
                >
                  <img
                    src="/images/ico.png"
                    alt=""
                    style="width: 40px; min-width: 40px"
                  />
                </a>
                <a
                  class="m-2 badge badge-light"
                  href="/"
                  style="text-decoration: none; font-size: 16px"
                >
                  Единая диспетчерская служба
                </a>
                {% if not is_admin %}
                <div class="vr m-2"></div>
                <a class="btn text-white" href="/submit">
                  Подача показаний</a
                >
                <div class="vr m-2"></div>
                <div
                  class="dropdown show d-flex flex-row"
                  style="margin-right: 5px"
                >
                  <a
                    class="btn dropdown-toggle"
                    href="#"
                    role="button"
                    id="dropdownMenuLink"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    style="color: white"
                  >
                    Дополнительно
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <a class="dropdown-item" href="/history">
                      Посмотреть историю
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="/ask"> Задать вопрос </a>
                  </div>
                </div>
              </div>
              {% endif %} {% if is_logged %}
              {% if is_admin %}
              <div class="d-flex flex-row">
                <div class="dropdown show" style="margin-right: 5px">
                  <a
                    class="btn dropdown-toggle btn-success"
                    href="#"
                    role="button"
                    id="dropdownMenuLink"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    Админ-панель
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <a class="dropdown-item" href="/addnews"> Добавить новость </a>
                    <a class="dropdown-item" href="/review">
                      Просмотр данных счётчиков
                    </a>
                    <a class="dropdown-item" href="/askreview">
                      Просмотр вопросов
                    </a>
                  </div>
                </div>
                {% endif %}
                <div class="dropdown show dropstart" style="margin-right: 5px">
                  <a
                    class="btn dropdown-toggle btn-light"
                    href="#"
                    role="button"
                    id="dropdownUserLink"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    {{ user_login }}
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdownUserLink">
                    <a class="dropdown-item" href="/"> Главная</a>
                    {% if not is_admin %}
                    <a class="dropdown-item" href="/account">
                      Личный кабинет
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="/account/edit">
                      Редактировать свои данные
                    </a>
                    <a class="dropdown-item" href="/account/password">
                      Изменить пароль
                    </a>
                    {% endif %}
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="/login?action=exit">
                      Выйти
                    </a>
                  </div>
                  </div>
                </div>
              </div>
            </div>
                {% endif %}
            </div>
          </ul>
        </div>
      </div>
    </nav>
    {% else %}
    <nav
      class="navbar navbar-expand-lg navbar-light"
      style="
        background: rgb(86, 83, 144);
        background: linear-gradient(
          90deg,
          rgba(86, 83, 144, 1) 0%,
          rgba(99, 96, 207, 1) 23%,
          rgba(52, 63, 106, 1) 100%
        );
      "
    >
      <div class="container">
        <div
          class="d-flex flex-row justify-content-between"
          style="width: 100%"
        >
          <a
            class="navbar-brand"
            href="/"
            class="{{ title == 'Главная' ? 'active' : '' }}"
          >
            <img
              src="/images/ico.png"
              alt=""
              style="width: 40px; min-width: 40px"
            />
          </a>
          <a
            class="text-main m-2 badge badge-light"
            href="/"
            style="text-decoration: none; font-size: auto"
          > Единая диспетчерская служба
          </a>
          <div id="navbarNav">
            <ul class="close navbar-nav mr-auto" style="width: 100%">
              <div class="d-flex flex-row" style="display: inline-block">
                <a class="nav-button ml-auto mr-4"
                  ><span id="nav-icon3"
                    ><span></span><span></span><span></span><span></span></span
                ></a>
              </div>
            </ul>
          </div>
        </div>
      </div>
      <div class="fixed-top main-menu" style="height: 100%">
        <div id="navbarNav" class="container position-absolute">
          <ul id="static-btn" class="navbar-nav mr-auto mt-2 align-items-end viewable-out" style="width: 94vw; margin-right: auto">
            <div class="d-flex flex-row" style="display: inline-block">
              <a class="nav-button ml-auto mr-4"
                ><span id="nav-icon3"
                  ><span></span><span></span><span></span><span></span></span
              ></a>
            </div>
          </ul>
        </div>
        <div class="flex-center p-5">
          <ul class="nav flex-column position-relative" style="top: -10%">
            <li class="nav-item delay-1">
              <a class="nav-link" href="/">Главная</a>
            </li>
            {% if is_admin %}
            <li class="nav-item delay-2">
              <a class="nav-link" href="/addnews"> Добавить новость </a>
            </li>
            <li class="nav-item delay-3">
              <a class="nav-link" href="/review"> Просмотр данных счётчиков </a>
            </li>
            <li class="nav-item delay-4">
              <a class="nav-link" href="/askreview"> Просмотр вопросов </a>
            </li>
            <li class="nav-item delay-5">
              <a class="nav-link" href="/login?action=exit"> Выход </a>
            </li>
            {% else %}
            <li class="nav-item delay-2">
              <a class="nav-link" href="/account"> Личный кабинет </a>
            </li>
            <li class="nav-item delay-3">
              <a class="nav-link" href="/submit">Подать показания</a>
            </li>
            <li class="nav-item delay-4">
              <a class="nav-link" href="/account/edit">Редактировать данные</a>
            </li>
            <li class="nav-item delay-5">
              <a class="nav-link" href="/account/password">Изменить пароль</a>
            </li>
            <li class="nav-item delay-6">
              <a class="nav-link" href="/submit">Задать вопрос</a>
            </li>
            <li class="nav-item delay-7">
              <a class="nav-link" href="/login?action=exit">Выйти</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
    {% endif %} {% else %}
    <nav
      class="navbar navbar-expand-lg navbar-light"
      style="
        background: rgb(86, 83, 144);
        background: linear-gradient(
          90deg,
          rgba(86, 83, 144, 1) 0%,
          rgba(99, 96, 207, 1) 23%,
          rgba(52, 63, 106, 1) 100%
        );
      "
    >
      <div class="container">
        <div
          class="d-flex flex-row justify-content-between"
          style="width: 100%"
        >
          <div>
            <a
              class="navbar-brand"
              href="/"
              class="{{ title == 'Главная' ? 'active' : '' }}"
            >
              <img
                src="/images/ico.png"
                alt=""
                style="width: 40px; min-width: 40px"
              />
            </a>
            <a
              class="text-del m-2 badge badge-light"
              href="/"
              style="text-decoration: none; font-size: 16px"
            > Единая диспетчерская служба
            </a>
          </div>
          <div id="navbarNav">
            <ul class="navbar-nav mr-auto" style="width: 100%">
              <div class="d-flex flex-row" style="display: inline-block">
                <a
                  class="btn btn-info"
                  style="margin-right: 5px"
                  href="/login"
                >
                  Войти
                </a>
                <a class="btn btn-success" href="/register"> Регистрация </a>
              </div>
            </ul>
          </div>
        </div>
      </div>
    </nav>
    <script>
      const text_delete = document.getElementsByClassName('text-del');
      if(text_delete[0]){
        if(window.screen.width<=560 && window.screen.width>=365 ){
          text_delete[0].textContent = 'ЕДС';
        } else {
          if(window.screen.width<365 ){
            text_delete[0].textContent = '';
          } else {
            text_delete[0].textContent = 'Единая диспетчерская служба';
          }
        }
      }
    </script>
    {% endif %} {% block content %} {% endblock %}
  </body>
  <script>
    const buttons = document.querySelectorAll(".btn-new");
    buttons.forEach((button) => {
      button.onclick = function(e){
        let x = e.clientX - e.target.offsetLeft;
        let y = e.clientY - e.target.offsetTop;
        let ripple = document.createElement("span");
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;
        this.appendChild(ripple);
        setTimeout(function(){
          ripple.remove();
        }, 600);
      }
    });

    $(document).ready(function () {
      $(".nav-button").click(function () {
        $("body").toggleClass("nav-open");
      });
    });

    function elementInView(elem){
      return $(window).scrollTop() < $(elem).offset().top + $(elem).height() ;
    };
    const elem = document.getElementById("static-btn");
      if ("ontouchstart" in document.documentElement) {
      $(window).scroll(function(){
        if (elementInView($('.close'))){
          $(elem).addClass("viewable-out");
          $(elem).removeClass("viewable-in");
        }
        else{
          $(elem).removeClass("viewable-out");
          $(elem).addClass("viewable-in");
        }
      });
    }

    const text_short = document.getElementsByClassName('text-main');
    if(text_short[0]){
      if(window.screen.width<=380){
        text_short[0].textContent = 'ЕДС';
      } else {
        text_short[0].textContent = 'Единая диспетчерская служба';
      }
    }
  </script>
  <style>
      ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      box-shadow: inset 0 0 5px grey;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(99, 96, 207, 1);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(88, 63, 106, 1);
    }

    .viewable-in {
      transition: 1s ease;
      transform: 0;
    }

    .viewable-out {
      transition: 0.3s ease-in-out;
      transform: translate(120px, 0);
    }

    .btn-new {
      display: inline-block;
      box-sizing: border-box;
      padding: 4px 10px;
      margin: 0 15px 15px 0;
      outline: none;
      border: none;
      border-radius: 4px;
      height: fit-content;
      line-height: calc(auto+10px);
      font-size: auto;
      font-weight: 500;
      text-decoration: none;
      color: #fff;
      background-color: #1a73e8;
      position: relative;
      overflow:hidden;
      vertical-align: top;
      cursor: pointer;
      user-select: none;
      appearance: none;
      touch-action: manipulation;
      z-index: 1;
    }
    .btn-new span{
      position: absolute;
      background: #fff;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      pointer-events: none;
      animation: btn_ripples 0.6s linear infinite;
    }
    @keyframes btn_ripples {
      0% {
        width: 0px;
        height: 0px;
        opacity: 0.5;
      }
      100% {
        width: 1000px;
        height: 1000px;
        opacity: 0;
      }
    }
    .btn-new:hover {
      box-shadow: 0 1px 2px 0 rgb(26 115 232 / 45%), 0 1px 3px 1px rgb(26 115 232 / 30%);
      background-color: #297be6;
    }
    .btn-new:active {
      box-shadow: 0 1px 2px 0 rgb(26 115 232 / 45%), 0 2px 6px 2px rgb(26 115 232 / 30%);
      background-color: #1a73e8 !important;
    }
    .btn-new:focus-visible {
      box-shadow: 0 0 0 3px lightskyblue;
    }
    .btn-new:disabled {
      pointer-events: none;
      opacity: 0.65;
    }

    .main-menu {
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
    }
    .nav-open .main-menu {
      opacity: 1;
      visibility: visible;
      background: rgba(52, 63, 106, 0.87);
    }
    .main-menu .nav li a {
      color: #fff;
      font-size: 4vh;
      font-weight: 600;
    }
    .main-menu .nav li {
      opacity: 0;
      -webkit-transform: translateY(-40px);
      transform: translateY(-40px);
      -webkit-animation-timing-function: cubic-bezier(0.45, 0.005, 0, 1);
      -moz-animation-timing-function: cubic-bezier(0.45, 0.005, 0, 1);
      -o-animation-timing-function: cubic-bezier(0.45, 0.005, 0, 1);
      animation-timing-function: cubic-bezier(0.45, 0.005, 0, 1);
    }
    .nav-open .main-menu .nav li {
      opacity: 1;
      -webkit-transform: translateY(0px);
      transform: translateY(0px);
      -webkit-transition: -webkit-transform 0.2s, opacity 0.2s;
      transition: transform 0.2s, opacity 0.2s;
    }
    .main-menu .nav li.delay-1 {
      -webkit-transition-delay: 0.1s;
      -moz-transition-delay: 0.1s;
      -ms-transition-delay: 0.1s;
      -o-transition-delay: 0.1s;
      transition-delay: 0.1s;
    }
    .main-menu .nav li.delay-2 {
      -webkit-transition-delay: 0.2s;
      -moz-transition-delay: 0.2s;
      -ms-transition-delay: 0.2s;
      -o-transition-delay: 0.2s;
      transition-delay: 0.2s;
    }
    .main-menu .nav li.delay-3 {
      -webkit-transition-delay: 0.3s;
      -moz-transition-delay: 0.3s;
      -ms-transition-delay: 0.3s;
      -o-transition-delay: 0.3s;
      transition-delay: 0.3s;
    }
    .main-menu .nav li.delay-4 {
      -webkit-transition-delay: 0.4s;
      -moz-transition-delay: 0.4s;
      -ms-transition-delay: 0.4s;
      -o-transition-delay: 0.4s;
      transition-delay: 0.4s;
    }
    .main-menu .nav li.delay-5 {
      -webkit-transition-delay: 0.5s;
      -moz-transition-delay: 0.5s;
      -ms-transition-delay: 0.5s;
      -o-transition-delay: 0.5s;
      transition-delay: 0.5s;
    }
    .main-menu .nav li.delay-6 {
      -webkit-transition-delay: 0.6s;
      -moz-transition-delay: 0.6s;
      -ms-transition-delay: 0.6s;
      -o-transition-delay: 0.6s;
      transition-delay: 0.6s;
    }
    .main-menu .nav li.delay-7 {
      -webkit-transition-delay: 0.7s;
      -moz-transition-delay: 0.7s;
      -ms-transition-delay: 0.7s;
      -o-transition-delay: 0.7s;
      transition-delay: 0.7s;
    }
    .main-menu .nav li.delay-8 {
      -webkit-transition-delay: 0.8s;
      -moz-transition-delay: 0.8s;
      -ms-transition-delay: 0.8s;
      -o-transition-delay: 0.8s;
      transition-delay: 0.8s;
    }
    .main-menu .nav li.delay-9 {
      -webkit-transition-delay: 0.9s;
      -moz-transition-delay: 0.9s;
      -ms-transition-delay: 0.9s;
      -o-transition-delay: 0.9s;
      transition-delay: 0.9s;
    }

    .nav-button {
      position: relative;
      z-index: 1111;
      border: solid 1px #f8f8f8;
      height: 42px;
      display: block;
      width: 50px;
      padding: 12px;
    }
    .nav-button #nav-icon3 {
      width: 24px;
      height: 22px;
      display: inline-block;
      position: relative;
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
      -webkit-transition: 0.5s ease-in-out;
      -moz-transition: 0.5s ease-in-out;
      -o-transition: 0.5s ease-in-out;
      transition: 0.5s ease-in-out;
      cursor: pointer;
    }
    .nav-button #nav-icon3 span {
      display: block;
      position: absolute;
      height: 3px;
      width: 100%;
      background: #ffffff;
      border-radius: 9px;
      opacity: 1;
      left: 0;
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
      -webkit-transition: 0.25s ease-in-out;
      -moz-transition: 0.25s ease-in-out;
      -o-transition: 0.25s ease-in-out;
      transition: 0.25s ease-in-out;
    }
    .nav-button #nav-icon3 span:nth-child(1) {
      top: 0;
    }
    .nav-button #nav-icon3 span:nth-child(2),
    #nav-icon3 span:nth-child(3) {
      top: 7px;
    }
    .nav-button #nav-icon3 span:nth-child(4) {
      top: 14px;
    }
    .nav-open #nav-icon3 span:nth-child(1) {
      top: 9px;
      width: 0;
      left: 50%;
    }
    .nav-open #nav-icon3 span:nth-child(2) {
      -webkit-transform: rotate(45deg);
      -moz-transform: rotate(45deg);
      -o-transform: rotate(45deg);
      transform: rotate(45deg);
    }
    .nav-open #nav-icon3 span:nth-child(3) {
      -webkit-transform: rotate(-45deg);
      -moz-transform: rotate(-45deg);
      -o-transform: rotate(-45deg);
      transform: rotate(-45deg);
    }
    .nav-open #nav-icon3 span:nth-child(4) {
      top: 9px;
      width: 0;
      left: 50%;
    }

    .flex-center {
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-pack: center;
      -webkit-justify-content: center;
      -ms-flex-pack: center;
      justify-content: center;
      -webkit-box-align: center;
      -webkit-align-items: center;
      -ms-flex-align: center;
      align-items: center;
      height: 100%;
    }

    @media (min-width: 481px) {
      .text-main { content: 'Единая диспетчерская служба' }
    }

    @media (max-width: 481px) {
      .text-main { content: 'ЕДС' }
    }
  </style>
</html>
